<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ZhyKun's Website</title>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8122415925069057"
    crossorigin="anonymous"></script>

  <style>
    /* Add your other styles here */
    .top-left-login {
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .top-left-login button {
      margin-bottom: 5px;
      padding: 8px 14px;
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    #login-btn {
      background: #4CAF50;
      color: white;
    }
    #logout-btn {
      background: #f44336;
      color: white;
    }
    #user-status {
      font-weight: bold;
      margin-top: 4px;
    }
  </style>
</head>
<body>

  <!-- Login/Logout buttons -->
  <div class="top-left-login">
    <button id="login-btn">üîê Login</button>
    <button id="logout-btn" style="display: none;">üö™ Logout</button>
    <div id="user-status">You are not logged in.</div>
  </div>

  <!-- Add your content here -->

  <!-- Firebase SDK and GitHub Auth -->
  <script type="module">
    window.addEventListener("DOMContentLoaded", () => {
      console.log("DOM fully loaded and parsed.");

      // Firebase imports with updated version
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
      import { getAuth, GithubAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAdM9xlsQ0UzWiFFnSC9eH1Gel8c8Pnmuo",
        authDomain: "zhykun-website-ed7b0.firebaseapp.com",
        projectId: "zhykun-website-ed7b0",
        appId: "1:19884756069:web:8123336c2857c02d9459e0",
        measurementId: "G-XTHX6VFS6Z",
        databaseURL: "https://zhykun-website-ed7b0.firebaseio.com",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      const loginBtn = document.getElementById("login-btn");
      const logoutBtn = document.getElementById("logout-btn");
      const userStatus = document.getElementById("user-status");

      // Login button event listener
      loginBtn.addEventListener("click", async () => {
        console.log("Login button clicked.");
        const provider = new GithubAuthProvider();
        try {
          const result = await signInWithPopup(auth, provider);
          const user = result.user;
          userStatus.textContent = `Welcome, ${user.displayName}`;
          loginBtn.style.display = 'none';
          logoutBtn.style.display = 'inline-block';
        } catch (error) {
          console.error(error.message);
          userStatus.textContent = 'Login failed, please try again.';
        }
      });

      // Logout button event listener
      logoutBtn.addEventListener("click", async () => {
        console.log("Logout button clicked.");
        try {
          await signOut(auth);
          userStatus.textContent = 'You have logged out.';
          loginBtn.style.display = 'inline-block';
          logoutBtn.style.display = 'none';
        } catch (error) {
          console.error(error.message);
          userStatus.textContent = 'Logout failed, please try again.';
        }
      });

      // Auth state change listener
      onAuthStateChanged(auth, (user) => {
        if (user) {
          userStatus.textContent = `Welcome, ${user.displayName}`;
          loginBtn.style.display = 'none';
          logoutBtn.style.display = 'inline-block';
        } else {
          userStatus.textContent = 'You are not logged in.';
          loginBtn.style.display = 'inline-block';
          logoutBtn.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>
